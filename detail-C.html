<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>C – Assignment 3</title>
<link rel="stylesheet" href="styles.css"/>
<style>
.chart-slab{
  background:#fff; border:1px solid var(--line); border-radius:8px;
  box-shadow:0 2px 14px rgba(0,0,0,.07);
  padding:0; overflow:hidden; display:flex; flex-direction:column;
}
.chart-frame{ width:100%; height:560px; border:0; display:block; background:#fff; overflow:hidden; }
.detail-wrap{ align-items:start; }
.left-col,.right-col{ display:flex; flex-direction:column; }
.notes{ flex-grow:1; display:flex; flex-direction:column; justify-content:space-between; height:100%; }

.figure-grid{ display:grid; grid-template-columns:1fr 1fr; gap:18px; margin-top:18px; }
.figitem .img{ width:100%; background:#fff; border:1px solid var(--line); border-radius:6px; overflow:hidden; box-shadow:0 1px 8px rgba(0,0,0,.05); }
.figitem .img img{ width:100%; height:auto; display:block; }
.figitem .caption{ font-size:16px; color:#555; line-height:1.55; margin-top:8px; }
@media (max-width:800px){ .figure-grid{ grid-template-columns:1fr; } }
</style>
</head>
<body>

<div class="detail-wrap">
  <section class="left-col">
    <div class="detail-title"><h2>C</h2></div>

    <div class="chart-slab">
      <iframe class="chart-frame" id="chartC" src="charts/C.html" title="Chart C" scrolling="no"></iframe>
    </div>

    <div class="figure-grid">
      <div class="figitem">
        <div class="img"><img src="figs/C-info.jpg" alt="说明图 C"></div>
        <div class="caption"><strong>A：</strong>Give the coordinates of the points</div>
      </div>
      <div class="figitem">
        <div class="img"><img src="figs/C1-info.jpg" alt="说明图 C1"></div>
        <div class="caption"><strong>B：</strong>Wrong scale and word position</div>
      </div>
    </div>
  </section>

 <aside class="right-col">
  <div class="notes">
    <section class="notes">
      <h3>Notes / D3.js Bar Chart (Step-by-Step)</h3>

      <h4>1) Setup page</h4>
      <p>
        Create an HTML page, add an <code>&lt;svg&gt;</code> canvas (e.g., 990×511 px), and load the D3.js library.
      </p>

      <h4>2) Define CSS roles</h4>
      <ul>
        <li><code>.frame</code> — gray border around the chart.</li>
        <li><code>.bar</code> — visible solid yellow bars.</li>
        <li><code>.ghost</code> — dashed bars with transparent fill; used for hover hit-testing.</li>
        <li><code>.highlight</code> — red, bold text when active.</li>
      </ul>

      <h4>3) Prepare data</h4>
      <p>
        Store model names and values in an array (e.g., <code>[{name:"Model A", value:92}, …]</code>).
      </p>

      <h4>4) Create scales</h4>
      <ul>
        <li><strong>x</strong>: band scale to position each bar evenly across the width.</li>
        <li><strong>y</strong>: linear scale mapping value → bar height.</li>
      </ul>

      <h4>5) Layout groups</h4>
      <p>
        Add a main <code>&lt;g&gt;</code> with margins (top/right/bottom/left) so axes and labels don’t touch edges.
      </p>

      <h4>6) Draw frame and axes</h4>
      <ul>
        <li>Draw a rectangular border using class <code>.frame</code>.</li>
        <li>Add the x-axis (model names) and y-axis (percent ticks).</li>
      </ul>

      <h4>7) Draw bars (from zero)</h4>
      <p>
        Append one rect per datum with class <code>.bar</code>. Start at height 0, then animate to full height.
      </p>

      <h4>8) Add “ghost” hit areas</h4>
      <p>
        Overlay matching dashed rects with class <code>.ghost</code> (transparent fill) above the bars to make
        hover detection easy and forgiving.
      </p>

      <h4>9) Labels and ticks</h4>
      <p>
        Add chart title, axis tick labels, and value labels above each bar (e.g., “94%”).
      </p>

      <h4>10) Interactions — hover highlight</h4>
      <ul>
        <li>On mouseover of a <code>.ghost</code>, apply <code>.highlight</code> to the corresponding value label.</li>
        <li>On mouseout, remove the highlight.</li>
      </ul>

      <h4>11) Transitions timing</h4>
      <ul>
        <li>Animate bar heights first (0 → value).</li>
        <li>Optionally fade in labels/ticks afterward.</li>
      </ul>

      <h4>12) Responsiveness &amp; accessibility</h4>
      <ul>
        <li>Use <code>viewBox</code> + <code>preserveAspectRatio</code> for a responsive SVG.</li>
        <li>Add <code>aria-label</code> or a <code>&lt;title&gt;</code> tag on bars so screen readers can read values.</li>
      </ul>
    </section>

    <div style="height:24px;"></div>
  </div>
</aside>

</div>

<script>
(function(){
  const frame = document.getElementById('chartC');
  function resizeByRead(){
    try{
      const doc = frame.contentDocument || frame.contentWindow.document;
      const h = Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight, doc.body.offsetHeight, doc.documentElement.offsetHeight);
      if (h && Math.abs(frame.clientHeight - h) > 5) frame.style.height = h + 'px';
    }catch(e){}
  }
  frame.addEventListener('load', resizeByRead);
  window.addEventListener('message', (e)=>{
    if (!e.data || e.data.__chartHeight == null) return;
    const H = Math.max(320, Math.min(1200, e.data.__chartHeight));
    frame.style.height = H + 'px';
  });
})();
</script>
</body>
</html>
