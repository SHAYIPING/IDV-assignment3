<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>E – Assignment 3</title>
<link rel="stylesheet" href="styles.css"/>
<style>
.chart-slab{ background:#fff; border:1px solid var(--line); border-radius:8px; box-shadow:0 2px 14px rgba(0,0,0,.07); padding:0; overflow:hidden; display:flex; flex-direction:column; }
.chart-frame{ width:100%; height:560px; border:0; display:block; background:#fff; overflow:hidden; }
.detail-wrap{ align-items:start; }
.left-col,.right-col{ display:flex; flex-direction:column; }
.notes{ flex-grow:1; display:flex; flex-direction:column; justify-content:space-between; height:100%; }

.figure-grid{ display:grid; grid-template-columns:1fr 1fr; gap:18px; margin-top:18px; }
.figitem .img{ width:100%; background:#fff; border:1px solid var(--line); border-radius:6px; overflow:hidden; box-shadow:0 1px 8px rgba(0,0,0,.05); }
.figitem .img img{ width:100%; height:auto; display:block; }
.figitem .caption{ font-size:16px; color:#555; line-height:1.55; margin-top:8px; }
@media (max-width:800px){ .figure-grid{ grid-template-columns:1fr; } }
</style>
</head>
<body>

<div class="detail-wrap">
  <section class="left-col">
    <div class="detail-title"><h2>E</h2></div>

    <div class="chart-slab">
      <iframe class="chart-frame" id="chartE" src="charts/E.html" title="Chart E" scrolling="no"></iframe>
    </div>

    <div class="figure-grid">
      <div class="figitem">
        <div class="img"><img src="figs/E-info.jpg" alt="说明图 E"></div>
        <div class="caption"><strong>A：</strong>Give the coordinates of the points</div>
      </div>
      <div class="figitem">
        <div class="img"><img src="figs/E1-info.jpg" alt="说明图 E1"></div>
        <div class="caption"><strong>B：</strong>Circle rendering failed for bug</div>
      </div>
    </div>
  </section>

  <aside class="right-col">
  <div class="notes">
    <section class="notes">
      <h3>Notes / Code-based Venn Diagram</h3>

      <h4>1) Define Three Circles</h4>
      <p>
        Each circle represents one set — <strong>Replace</strong>, <strong>Delete</strong>, and <strong>Rewrite</strong>.
        Positions are controlled by the circle center <code>(cx, cy)</code> and radius <code>r</code>.
        Adjusting these values changes how much the circles overlap.
      </p>

      <h4>2) Use <code>clipPath</code> for Intersections</h4>
      <p>
        <code>clipPath</code> acts like a stencil — it keeps only the overlapping parts of shapes.
        Drawing <em>Delete</em> inside the clip of <em>Replace</em> produces the intersection
        <strong>Replace ∩ Delete</strong>.
      </p>

      <h4>3) Use <code>mask</code> for Exclusive Areas</h4>
      <p>
        <code>mask</code> works like an eraser: white keeps, black removes.
        It is used to retain only the parts that belong to a single circle (non-overlapping regions).
      </p>

      <h4>4) Three-Layer Structure</h4>
      <ul>
        <li><strong>Visual layer</strong> — shows colors and brightness for the 7 logical regions.</li>
        <li><strong>Interactive layer</strong> — transparent overlay for hover detection and highlighting.</li>
        <li><strong>Text layer</strong> — displays titles and Roman numerals.</li>
      </ul>

      <h4>5) Fade-in Transition</h4>
      <p>
        On page load, layers fade in sequentially for a smooth, polished appearance.
      </p>

      <h4>6) Mouse Interaction</h4>
      <p>
        All 7 regions are interactive. On hover, a region becomes brighter and gains an outline.
      </p>

      <h4>7) Result Summary</h4>
      <p>
        Outer regions are darker, two-way overlaps are lighter, and the center (three-way overlap) is brightest —
        producing a clear, layered, and intuitive Venn diagram.
      </p>
    </section>
    <div style="height:24px;"></div>
  </div>
</aside>

</div>

<script>
(function(){
  const frame = document.getElementById('chartE');
  function resizeByRead(){
    try{
      const doc = frame.contentDocument || frame.contentWindow.document;
      const h = Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight, doc.body.offsetHeight, doc.documentElement.offsetHeight);
      if (h && Math.abs(frame.clientHeight - h) > 5) frame.style.height = h + 'px';
    }catch(e){}
  }
  frame.addEventListener('load', resizeByRead);
  window.addEventListener('message', (e)=>{
    if (!e.data || e.data.__chartHeight == null) return;
    const H = Math.max(320, Math.min(1200, e.data.__chartHeight));
    frame.style.height = H + 'px';
  });
})();
</script>
</body>
</html>
